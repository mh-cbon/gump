package: github.com/mh-cbon/gump
scripts:
  preversion: |
    666 git fetch --tags \
    && philea "666 go vet %s" "666 go-fmt-fail %s" \
    && 666 rm-glob -r build/ \
    && 666 rm-glob -r assets/ \
    && 666 build-them-all build main.go -o "build/&os-&arch/&pkg" --ldflags "-X main.VERSION=!newversion!"
  postversion: |
    666 git push && 666 git push --tags \
    && 666 philea -S -p "build/windows*/*" "666 archive create -f -o=assets/%dname.zip -C=build/%dname/ ." \
    && 666 philea -S -e windows*/** -p "build/*/**" "666 archive create -f -o=assets/%dname.tar.gz -C=build/%dname/ ." \
    && 666 gh-api-cli create-release -n release -o mh-cbon -r gump --ver !newversion! \
    && 666 gh-api-cli upload-release-asset -n release --glob "assets/*" -o mh-cbon -r gump --ver !newversion! \
    && 666 rm-glob -r build/ \
    && 666 rm-glob -r assets/ \
    && 666 go install --ldflags "-X main.VERSION=!newversion!"
import:
- package: github.com/docopt/docopt.go
- package: github.com/mh-cbon/verbose
- package: github.com/mh-cbon/semver
- package: gopkg.in/yaml.v2
- package: github.com/mh-cbon/go-repo-utils
  version: ^0.0.2
